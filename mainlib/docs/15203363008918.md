# Java Web开发 Day4(Web开发)
1. 常识
	- http://www.sina.com：url
	- www.sina.com：主机名
	- sina.com：域名
![屏幕快照 2018-03-07 下午7.29.52](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%887.29.52.png)
2. 注意
	- 方法1:web应用开发好后对目录进行虚拟映射:``  需重启服务器
		- 在server.xml文件中的HOST标签中创建
		-  设置省缺`<Context path="" docBase="c:\path"/>`
		- `<Context path="/itcast" docBase="c:\path"/>`
		- `/itcast`为虚拟目录
	- 方法2:在`/conf/Catalina/localhost/`目录下配置新建一个`xxx.xml`为扩展名的文件.
		- 在其中创建`<Context docBase="c:\path"/>`无须path属性
		- 访问`http://localhost:8080/xxx/1.html`
	- 多级虚拟目录
		- 方法2中的xml文件名为虚拟目录
		- `a#b#c`
		- `/a/b/c/1.html`
	- 设置服务器默认首面
		- 将配置中的`xxx.xml`文件重命名为`Root.xml`
	- 方式3:tomcat自动映射
		- `webapps`下的目录为可直接访问
	- 文件存放时必须严格按照存放规则
![屏幕快照 2018-03-07 下午8.10.45](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%888.10.45.png)

	- web.xml文件的书写，仿写`/web.xml`
3. 配置虚拟主机
	- `server.xml文件`新建`<HOST name="www.sina.com" appBase="c:/sina"><Context path= "" docBase = "c:\sina\  mail"/><HOST>`
	- 修改HOSTS文件
	- 配置省缺：
		- 项目文件夹下新建`WEB-INF/web.xml`
		- 抄袭配置文件

4. 打包
	- `jar -cvf  文件名.war 项目文件夹`
	- 服务器自动解压，释放
	- 开发修改后自动加载（建议不要配置），小项目可以配，大应用不要。
![屏幕快照 2018-03-07 下午9.41.28](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%889.41.28.png)
5. Tomcat 体系结构
![屏幕快照 2018-03-07 下午9.46.11](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%889.46.11.png)
	- 配置https链接
		- `keytool -genkey -alias tomcat -keyalg RSA`
		- 设置密码库密码
		- `配置server.xml文件` ，提取注释部分
		- 查看tomcat文档
![屏幕快照 2018-03-07 下午10.10.03](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%8810.10.03.png)
		- 设置`keystoreFile && keystorePass`属性
6. Tomcat管理平台
![屏幕快照 2018-03-07 下午10.18.48](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%8810.18.48.png)
	- 配置管理员角色`<role rolename="manger">`
![屏幕快照 2018-03-07 下午10.20.32](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%8810.20.32.png)
7. http协议
	- 版本HTTP/1.1（保持连接） HTTP/1.0（马上断开连接）
	- 服务器设计原则，减少请求数目（例：将图片合为一张图片、js文件合一）
	- http请求
![屏幕快照 2018-03-07 下午10.43.52-w754](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%8810.43.52.png)
	- 请求数据的方式GET和POST 
		- 页面中有表格使用POST，其他的都是GET。
![屏幕快照 2018-03-07 下午10.51.35-w896](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%8810.51.35.png)
8. 请求头详解
![屏幕快照 2018-03-07 下午10.57.10](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-07%20%E4%B8%8B%E5%8D%8810.57.10.png)
	- Accept：客户机支持的数据类型
	- Accept-Charset：客户机支持的编码
	- Accept-Encoding：客户机支持的数据压缩格式
	- Accept-Language：客户机的语言环境
	- Host：客户机想访问的主机名
	- If-Modified-Since：客户机通过这个头告诉服务器，资源的缓存时间 
	- Referer：客户机告诉服务器，他从哪个资源访问服务器（防盗链）
	- User-Agent：客户机的软件环境
	- Cookie：可以向服务器带数据
	- Connection：请求完数据采取断开连接还是保持
	- Date：时间
9. http响应
![屏幕快照 2018-03-08 下午6.20.38](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-08%20%E4%B8%8B%E5%8D%886.20.38.png)
	- 服务器可以通过响应头来控制浏览器。
	- 状态行
![屏幕快照 2018-03-08 下午6.20.38](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-08%20%E4%B8%8B%E5%8D%886.20.38.png)
![屏幕快照 2018-03-08 下午6.23.30](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-08%20%E4%B8%8B%E5%8D%886.23.30.png)
	- 304、307要求拿缓存 

- 常用响应头
	- Location：配合302状态码使用，告诉客户找谁（请求重定向）
	![屏幕快照 2018-03-08 下午6.36.11](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-08%20%E4%B8%8B%E5%8D%886.36.11.png)
	- Server：告诉浏览器，服务器的类型
	- Content-Encoding：告诉浏览器数据的压缩格式
	- Content-Length：告诉浏览器数据的长度
	![屏幕快照 2018-03-08 下午7.30.10](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-08%20%E4%B8%8B%E5%8D%887.30.10.png)
	- Content-Type：告诉浏览器，资源的格式，文件类型的写法去web.xml文件搜索
	![屏幕快照 2018-03-08 下午7.39.40](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-08%20%E4%B8%8B%E5%8D%887.39.40.png)
	- Last-Modified：告诉浏览器当前资源缓存时间
	- Refresh：告诉浏览器隔多长时间刷新（可跳转页面）
	- Content-disposition：下载头
![屏幕快照 2018-03-08 下午7.48.27](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-08%20%E4%B8%8B%E5%8D%887.48.27.png)
	- Transfer-Encoding：数据的传送格式：chunked
	- ETag：缓存相关的头，可以做到做到实时更新。以前的缓存头，无法做到实时更新
	- Expires：告诉浏览器回送的资源缓存多长时间。-1或0，不缓存。2012：到2012年访问缓存。
	- Cache-Control：no-cache：不要缓存
	- Pragma：no-cache：不要缓存
	- Connection：close／Keep-Alive：链接完成后是否关闭
	- Date：时间

####HTTP实用头字段
![屏幕快照 2018-03-08 下午8.03.56](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-08%20%E4%B8%8B%E5%8D%888.03.56.png)
- Range：断点传输
![屏幕快照 2018-03-08 下午8.04.12](media/15203363008918/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-03-08%20%E4%B8%8B%E5%8D%888.04.12.png)


